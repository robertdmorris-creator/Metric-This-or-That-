<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metric Match-Up</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f3f4f6;
        }
        .font-fredoka {
            font-family: 'Fredoka One', cursive;
        }
        .choice-card {
            background-color: #ffffff;
            border-radius: 1.5rem;
            border: 6px solid #d1d5db; /* Thicker border */
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            padding: 2rem; /* More padding */
        }
        .choice-card:hover {
            transform: translateY(-5px);
            border-color: #60a5fa;
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
        }
        .choice-card.correct {
            border-color: #4ade80;
            background-color: #f0fdf4;
        }
        .choice-card.incorrect {
            border-color: #f87171;
            background-color: #fef2f2;
        }
        .btn-next {
            border-radius: 1rem; /* Larger radius */
            font-weight: 700;
            padding: 1rem 2rem; /* Bigger button */
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 6px 0 0 #15803d; /* Bigger shadow */
            background-color: #22c55e;
            color: white;
            font-size: 2.25rem; /* Larger font */
        }
        .btn-next:active {
            transform: translateY(3px);
            box-shadow: 0 3px 0 0 #15803d;
        }
        .item-emoji {
            font-size: 8rem; /* Much larger emoji */
            line-height: 1;
            background-color: #e5e7eb;
            width: 180px; /* Larger box */
            height: 180px; /* Larger box */
            border-radius: 1.5rem; /* Larger radius */
        }
        .btn-fullscreen {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: #e5e7eb;
            border-radius: 9999px;
            padding: 0.75rem;
            cursor: pointer;
            border: 2px solid #d1d5db;
        }
        .btn-fullscreen:hover {
            background-color: #d1d5db;
        }
    </style>
</head>
<body class="text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl mx-auto relative">
        <button id="fullscreen-btn" class="btn-fullscreen" title="Toggle Fullscreen">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
            </svg>
        </button>

        <header class="text-center mb-8">
            <h1 class="text-7xl font-fredoka text-gray-700">Metric Match-Up</h1>
            <p class="text-3xl text-gray-500 mt-2">Which one is more?</p>
        </header>

        <main id="game-container">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                <!-- Left Choice -->
                <div id="choice-left" class="choice-card p-6 text-center flex flex-col items-center justify-between" onclick="checkAnswer('left')">
                    <div class="item-emoji flex items-center justify-center" id="emoji-left"></div>
                    <p class="text-3xl mt-4" id="desc-left"></p>
                    <p class="text-5xl font-fredoka text-blue-600 mt-2" id="value-left"></p>
                </div>

                <!-- Right Choice -->
                <div id="choice-right" class="choice-card p-6 text-center flex flex-col items-center justify-between" onclick="checkAnswer('right')">
                    <div class="item-emoji flex items-center justify-center" id="emoji-right"></div>
                    <p class="text-3xl mt-4" id="desc-right"></p>
                    <p class="text-5xl font-fredoka text-blue-600 mt-2" id="value-right"></p>
                </div>
            </div>

            <div class="text-center mt-6 h-16">
                 <p id="feedback-text" class="text-4xl font-bold"></p>
            </div>
            
            <div class="text-center mt-4">
                <button id="next-btn" class="btn-next font-fredoka hidden">Next Round</button>
            </div>
        </main>

        <footer class="text-center mt-8">
            <p class="text-3xl text-gray-600">Score: <span id="score" class="font-fredoka text-5xl">0</span></p>
        </footer>
    </div>

    <script>
        const prefixes = [
            { symbol: 'k', factor: 1000 },
            { symbol: '', factor: 1 },
            { symbol: 'c', factor: 0.01 },
            { symbol: 'm', factor: 0.001 }
        ];

        const items = {
            grams: [
                { name: 'A bowling ball', emoji: '🎳' },
                { name: 'An apple', emoji: '🍎' },
                { name: 'A large car', emoji: '🚗' },
                { name: 'A feather', emoji: '🪶' },
                { name: 'A house cat', emoji: '🐈' }
            ],
            meters: [
                { name: 'A giant redwood tree', emoji: '🌲' },
                { name: 'The length of a pencil', emoji: '✏️' },
                { name: 'A blue whale', emoji: '🐋' },
                { name: 'The height of a doorway', emoji: '🚪' },
                { name: 'A small ant', emoji: '🐜' }
            ],
            liters: [
                { name: 'A large fish tank', emoji: '🐠' },
                { name: 'A carton of milk', emoji: '🥛' },
                { name: 'A backyard swimming pool', emoji: '🏊' },
                { name: 'A can of soda', emoji: '🥤' },
                { name: 'A teaspoon of medicine', emoji: '🥄' }
            ]
        };

        // DOM Elements
        const choiceLeft = document.getElementById('choice-left');
        const choiceRight = document.getElementById('choice-right');
        const emojiLeft = document.getElementById('emoji-left');
        const emojiRight = document.getElementById('emoji-right');
        const descLeft = document.getElementById('desc-left');
        const descRight = document.getElementById('desc-right');
        const valueLeft = document.getElementById('value-left');
        const valueRight = document.getElementById('value-right');
        const feedbackText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('score');
        const fullscreenBtn = document.getElementById('fullscreen-btn');

        let leftItem = {};
        let rightItem = {};
        let score = 0;
        let isAnswered = false;

        function generateQuestion() {
            isAnswered = false;
            // 1. Pick a category (grams, meters, or liters)
            const categories = Object.keys(items);
            const category = categories[Math.floor(Math.random() * categories.length)];
            const baseUnit = category;
            
            // 2. Pick two different items from that category
            let item1Index = Math.floor(Math.random() * items[category].length);
            let item2Index;
            do {
                item2Index = Math.floor(Math.random() * items[category].length);
            } while (item1Index === item2Index);
            
            const item1 = items[category][item1Index];
            const item2 = items[category][item2Index];

            // 3. Pick two different prefixes
            let prefix1Index = Math.floor(Math.random() * prefixes.length);
            let prefix2Index;
            do {
                prefix2Index = Math.floor(Math.random() * prefixes.length);
            } while (prefix1Index === prefix2Index);

            const prefix1 = prefixes[prefix1Index];
            const prefix2 = prefixes[prefix2Index];

            // 4. Generate values
            // Make one value clearly larger than the other after conversion
            const baseValue1 = Math.floor(Math.random() * 200 + 10) / 10; // e.g., 1.0 to 21.0
            const baseValue2 = baseValue1 * (Math.random() * 1.5 + 1.5); // 1.5x to 3x bigger

            leftItem = {
                ...item1,
                value: parseFloat(baseValue1.toPrecision(2)),
                prefix: prefix1,
                baseUnit: baseUnit
            };
            
            // Randomly decide which item gets the bigger value
            if (Math.random() > 0.5) {
                rightItem = { ...item2, value: parseFloat(baseValue2.toPrecision(2)), prefix: prefix2, baseUnit: baseUnit };
            } else {
                 rightItem = { ...item2, value: parseFloat(baseValue1.toPrecision(2)), prefix: prefix2, baseUnit: baseUnit };
                 leftItem.value = parseFloat(baseValue2.toPrecision(2));
            }
            
            // Calculate the displayed values
            leftItem.displayValue = leftItem.value / leftItem.prefix.factor;
            rightItem.displayValue = rightItem.value / rightItem.prefix.factor;

            updateUIForNewQuestion();
        }

        function checkAnswer(choice) {
            if (isAnswered) return; // Prevent multiple clicks
            isAnswered = true;

            const leftTotalValue = leftItem.value;
            const rightTotalValue = rightItem.value;

            let correctChoice = '';
            if (leftTotalValue > rightTotalValue) {
                correctChoice = 'left';
            } else {
                correctChoice = 'right';
            }

            if (choice === correctChoice) {
                score++;
                feedbackText.textContent = "Correct!";
                feedbackText.className = "text-xl font-bold text-green-600";
                document.getElementById(`choice-${choice}`).classList.add('correct');
            } else {
                feedbackText.textContent = "Not quite!";
                feedbackText.className = "text-xl font-bold text-red-500";
                document.getElementById(`choice-${choice}`).classList.add('incorrect');
                document.getElementById(`choice-${correctChoice}`).classList.add('correct');
            }
            
            // Show the converted values for learning
            const leftInBase = `${leftTotalValue.toLocaleString()} ${leftItem.baseUnit}`;
            const rightInBase = `${rightTotalValue.toLocaleString()} ${rightItem.baseUnit}`;
            
            valueLeft.innerHTML += `<br><span class="text-2xl font-sans text-gray-500">(${leftInBase})</span>`;
            valueRight.innerHTML += `<br><span class="text-2xl font-sans text-gray-500">(${rightInBase})</span>`;

            scoreEl.textContent = score;
            nextBtn.classList.remove('hidden');
        }

        function updateUIForNewQuestion() {
            // Reset UI
            feedbackText.textContent = '';
            nextBtn.classList.add('hidden');
            choiceLeft.classList.remove('correct', 'incorrect');
            choiceRight.classList.remove('correct', 'incorrect');
            choiceLeft.style.pointerEvents = 'auto';
            choiceRight.style.pointerEvents = 'auto';

            // Update Left Card
            emojiLeft.textContent = leftItem.emoji;
            descLeft.textContent = leftItem.name;
            valueLeft.textContent = `${leftItem.displayValue.toLocaleString()} ${leftItem.prefix.symbol}${leftItem.baseUnit}`;

            // Update Right Card
            emojiRight.textContent = rightItem.emoji;
            descRight.textContent = rightItem.name;
            valueRight.textContent = `${rightItem.displayValue.toLocaleString()} ${rightItem.prefix.symbol}${rightItem.baseUnit}`;
        }

        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // --- Event Listeners ---
        nextBtn.addEventListener('click', generateQuestion);
        fullscreenBtn.addEventListener('click', toggleFullScreen);

        // --- Initial Load ---
        window.onload = generateQuestion;
    </script>
</body>
</html>

